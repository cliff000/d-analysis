<h1>対戦の記録</h1>
<p>対戦結果を保存するためのページです</p>


<!-- 日付が範囲外だと警告を出す -->
<% if @now < @kcRange[0] || @now > @kcRange[1] %>
    <script>
        alert('現在のKCカップは時間外ですので注意してください\nKCカップは右上から切り替え出来ます');
    </script>
<% end %>

<%= form_for(@match, url:{controller:'maches', action:'create'}) do |form| %>
    <div class="form-group">
        <label>自分のデッキ</label>
        <%= form.select :mydeck, @decks,
            {selected: @lastData.nil? ? "" : @lastData.mydeck}, {class: 'form-control'} %>
    </div>
    <div class="form-group">
        <label>自分のスキル</label>
        <%= form.select :myskill, @skills,
            {selected: @lastData.nil? ? "" : @lastData.myskill}, {class: 'form-control'} %>
    </div>
    
    <div class="form-group">
        <label>相手のデッキ</label>
        <%= form.select :oppdeck, @decks,
            {}, {class: 'form-control'} %>
    </div>

    <div class="form-group">
        <label>相手のスキル</label>
        <%= form.select :oppskill, @skills,
            {}, {selected: "", class: 'form-control'} %>
    </div>

    <div class="form-group">
        <label>勝敗</label>
        <div class="form-check">
            <label><%= form.radio_button :victory, "勝ち", :class => 'form-check-input', checked: true%>勝ち</label>
        </div>
        <div class="form-check">
            <label><%= form.radio_button :victory, "負け", :class => 'form-check-input' %>負け</label>
        </div>
    </div>

    <div class="form-group">
        DP増減値<br>
        <i id=dp_plus class="fas fa-plus"></i>
        <i id=dp_minus class="fas fa-minus"></i>
        <%= form.text_field :dpChanging , value: "1000" %>
    </div>

    <%= form.submit "送信", class:"btn btn-primary" %>
<% end %>

<script>
    $('#dp_minus').hide();
    $('#match_victory_勝ち').change(function(){
        $('#dp_plus').show();
        $('#dp_minus').hide();
    });
    $('#match_victory_負け').change(function(){
        $('#dp_plus').hide();
        $('#dp_minus').show();
    });

    $('#match_oppdeck').change(function(){
        $('#match_oppskill').val(gon.major_skill[$('#match_oppdeck').val()]);
    });
    $('#match_mydeck').change(function(){
        $('#match_myskill').val(gon.major_skill[$('#match_mydeck').val()]);
    });
</script>

